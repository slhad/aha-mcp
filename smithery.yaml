# Smithery.ai configuration for Home Assistant MCP Server
runtime: container
startCommand:
    type: http # Specifies the server communicates over standard input/output
    configSchema:
        # JSON Schema defining the configuration options users need to provide
        type: object
        required:
            - hassUrl
            - hassAccessToken
        properties:
            # Home Assistant Connection Config
            hassUrl:
                type: string
                description: "Base URL for your Home Assistant instance (e.g., https://your-home-assistant.local:8123)."
                default: "http://localhost:8123"
            hassAccessToken:
                type: string
                description: "Long-lived access token for Home Assistant authentication. You can generate this in Home Assistant under Profile > Security > Long-lived access tokens."
                format: password # Hides the value in UI inputs

            # Transport and Server Config
            transport:
                type: string
                description: "Transport method to use for MCP communication."
                enum: ["stdio", "sse", "streamablehttp"]
                default: "streamablehttp"
            port:
                type: integer
                description: "Port number for HTTP/SSE server modes (only used when transport is 'sse' or 'streamablehttp')."
                default: 8081
                minimum: 1
                maximum: 65535

            # Feature Toggles
            debugMode:
                type: boolean
                description: "Enable debug logging for troubleshooting."
                default: false
            resourcesToTools:
                type: boolean
                description: "Enable mapping Home Assistant resources (entities, automations, services) as individual MCP tools. Useful for clients that can only interact via tool-based interfaces."
                default: true
            limitResources:
                type: integer
                description: "Limit the number of resources returned by the server. Set to -1 for unlimited."
                default: -1
                minimum: -1

        additionalProperties: false # Disallow properties not defined above
